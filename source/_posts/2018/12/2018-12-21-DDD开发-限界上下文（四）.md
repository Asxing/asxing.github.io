---
title: DDD开发-限界上下文（四）
author: HoldDie
tags: [DDD,限界上下文]
top: false
date: 2018-12-21 19:43:41
categories: DDD
---

**向黑暗走去的人，或许会被黑暗吞噬，或许会化作明灯。 ——水云歌**

## 软件复杂度

### 1、控制软件复杂度原则

- 规模
- 结构
- 变化

### 2、规模

#### 2.1、思想：

- 分而治之，小即是美
- 单一职责，统一接口

#### 2.2、保持结构清晰

- 保持结构清晰一致
- 整洁架构提出了一个可测试的模型，无需依赖于任何基础设施就可以对他进行测试，只需通过边界对象发送和接受对应的数据结构即可。
- 遵循稳定依赖原则，不对变化或易于变化的事务形成依赖
- 整洁架构模型让外部易变的部分依赖于更加稳定的领域模型，从而保证了核心的领域模型不会受到外部的影响。

#### 2.3、拥抱变化

2.3.1、架构质量属性

- 可进化性
  - 划分设计单元的边界，以确定每个设计单元应该履行的职责以及需要与其他设计单元协作的接口。
  - 设计单元具有不同的设计粒度，包括函数、对象、模块、组件及服务。
- 可扩展性
  - 常见变化点：
    - 业务规则
    - 算法策略
    - 外部服务
    - 硬件支持
    - 命令请求
    - 协议标准
    - 数据格式
    - 业务流程
    - 系统配置
    - 界面表现
- 可定制性
  - 提供统一的插件接口，供系统之外按照指定接口定制功能。

## 领域驱动设计应对（一）

> 领域驱动设计关注的焦点在于领域和领域逻辑。

### 1、需求引起软件复杂度

> 需求分为业务需求与质量属性需求，对应表先为两个方面：技术复杂度与业务复杂度

#### 1.1、技术复杂度来自需求的质量属性

- 诸如安全、高性能、高并发、高可用性等需求
- 为软件设计带来了极大的挑战，让人痛苦的是这些因素彼此之间可能又互相矛盾、互相影响。

#### 1.2、业务复杂度对应了客户的业务需求

- 因而这种复杂度往往会随着需求规模的增大而增加。
- 由于需求不可能做到完全独立，一旦规模扩大到一定程度，不仅产生了功能数量的增加，还会因为功能互相之间的依赖与影响使得这种复杂度产生叠加，进而影响到整个系统的质量属性，比如系统的可维护性与可扩展性。

> **技术复杂度与业务复杂度并非完全独立，二者混合在一起产生的化合作用更让系统的复杂度变得不可预期，难以掌控**

#### 1.3、通常面临的问题

- 问题域过于庞大而复杂，使得从问题域中寻求解决方案的挑战增加，该问题与软件系统的**规模**有关。
- 开发人员将业务逻辑的复杂度与技术实现的复杂度混淆在一起，该问题与软件系统的**结构**有关。
- 随着需求的增长和变化，无法控制业务复杂度和技术复杂度，该问题与软件系统的**变化**有关。

### 2、领域驱动设计的应对措施

> **确定业务逻辑与技术实现的边界，从而隔离各自的复杂度**。

- 领域驱动设计通过**分层架构**与**六边形架构**来确保业务逻辑与技术实现的隔离。

### 3、限界上下文分而治之

针对庞大而复杂的问题域，限界上下文采用了“分而治之”的思想对问题域进行了分解，有效地控制了问题域的规模，进而控制了整个系统的规模。一旦规模减小，无论业务复杂度还是技术复杂度，都会得到显著的降低，在对领域进行分析以及建模时，也能变得更加容易。

限界上下文对整个系统进行了划分，在将一个大系统拆分为一个个小系统后，我们再利用分层架构与六边形架构思想对其进行逻辑分层，以确保业务逻辑与技术实现的隔离，其设计会变得更易于把控，系统的架构也会变得更加清晰。

通过对领域的分析而引入限界上下文对问题域进行分解，通过降低规模的方式来降低问题域的复杂度；同时，通过为模型确定清晰的边界，使得系统的结构变得更加的清晰，从而保证了领域逻辑的一致性。

一旦确定了清晰的领域模型，就能够帮助我们更加容易地发现系统的可重用点与可扩展点，并遵循“高内聚、松耦合”的原则对系统职责进行合理分配，再辅以分层架构以划分逻辑边界。

### 4、领域模型对领域知识的抽象

领域模型是对业务需求的一种**抽象**，其表达了领域概念、领域规则以及领域概念之间的关系。

一个好的领域模型是对统一语言的可视化表示，通过它可以减少需求沟通可能出现的歧义；

通过提炼领域知识，并运用抽象的领域模型去表达，就可以达到对领域逻辑的**化繁为简**。

模型是封装，实现了对业务细节的隐藏；模型是抽象，提取了领域知识的共同特征，保留了面对变化时能够良好扩展的可能性。

领域建模就是要从这些纷繁复杂的领域逻辑中寻找到能够表示项目管理领域的概念，并利用面向对象建模范式或其他范式对概念进行抽象，并确定它们之间的关系。

经过对这些项目管理流程的分析，我们虽然发现在业务概念和规则上确有不同之处，但由于它们都归属于软件开发领域，我们自然也能寻找到某些共同特征的蛛丝马迹。