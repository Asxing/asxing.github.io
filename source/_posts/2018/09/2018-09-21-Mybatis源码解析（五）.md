---
title: Mybatis源码解析（五）
tags: [Mybatis,源码]
date: 2018-09-21 09:16:58
categories: Mybatis
---



> 我可以走得很慢，但是我绝不后退。 ——天使的翅膀520



今天对于Spring 和 Mybatis 这对组合有更加深入的认识，对于Mybatis我们知道，其内部存在一级缓存和二级缓存的，但是我们都知道，在使用一级缓存的时候，由于 Spring 的全局实体的管理，导致每次Mybatis查询的实体都是新的，这样就存在一级缓存是无效的，对于二级缓存我们可以实现Cache接口，然后就可以完成了。



但是当我使用了@Annotation注解的时候，对于同一个事务中的对象实体，在Mybatis底层因为使用的是SQLSession，当有连续两次相同的查询，Mybatis不会去数据库总查询，而是直接从SQLSession中取，返回的对象是同一个对象，此时当我们去查看数据的库中的数据，虽然数据还是处理事务之前的数据，但是对于我们在事务中更新的对象，还没有持久化到数据库中，此时第二次查询里应该，是查询数据库中的原来没有被更新的，但是目前会直接从内存中读取数据。